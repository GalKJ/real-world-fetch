<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real world fetch</title>
  </head>
  <body>
    <form id="form">
      <fieldset>
        <legend>Contact Us</legend>

        <!-- <label for="name">Name</label>
        <input id="name" name="name" type="text" required />

        <label for="email">Email</label>
        <input id="email" name="email" type="email" required /> -->

        <label for="search">Search</label>
        <input id="search" name="search" type="search" required />

        <button type="submit">Submit</button>
        <output></output>
      </fieldset>
    </form>

    <script>
      // HTTP errors. Challenge One

      // fetch('https://echo.oliverjam.workers.dev/status/404')
      //   .then(console.log)
      //   .catch(console.error);

      // Challenge Two.

      // fetch('https://echo.oliverjam.workers.dev/status/404')
      //   .then((response) => {
      //     if (!response.ok) {
      //       throw new Error(`bad error baby ${response.status}`);
      //     }
      //   })
      //   .catch(console.error);

      // Submitting data. Challenge One

      // fetch('https://echo.oliverjam.workers.dev/json', {
      //   method: 'POST',
      //   headers: {
      //     'Content-Type': 'application/json',
      //   },
      //   body: JSON.stringify({
      //     name: 'The Rabbit',
      //   }),
      // })
      //   .then((response) => {
      //     return response.json();
      //   })
      //   .then((data) => console.log(data))
      //   .catch(console.error);

      // User Input

      // const myForm = document.querySelector('form');

      // myForm.addEventListener('submit', (event) => {
      //   event.preventDefault();

      //   const name = document.querySelector('#name').value;
      //   const email = document.querySelector('#email').value;

      //   fetch('https://echo.oliverjam.workers.dev/json', {
      //     method: 'POST',
      //     headers: {
      //       'Content-Type': 'application/json',
      //     },
      //     body: JSON.stringify({
      //       name: name,
      //       email: email,
      //     }),
      //   })
      //     .then((response) => {
      //       return response.json();
      //     })
      //     .then((data) => console.log(data))
      //     .catch(console.error);
      // });

      // New Form Data

      // const myForm = document.querySelector('form');

      // myForm.addEventListener('submit', (event) => {
      //   event.preventDefault();

      //   const name = document.querySelector('#name').value;
      //   const email = document.querySelector('#email').value;

      //   const newForm = new FormData(myForm);
      //   const data = Object.fromEntries(newForm);

      //   fetch('https://echo.oliverjam.workers.dev/json', {
      //     method: 'POST',
      //     headers: {
      //       'Content-Type': 'application/json',
      //     },
      //     body: JSON.stringify({
      //       data,
      //     }),
      //   })
      //     .then((response) => {
      //       return response.json();
      //     })
      //     .then((data) => console.log(data))
      //     .catch(console.error);
      // });

      // Pokemon workshop

      const myForm = document.querySelector('form');
      const output = document.querySelector('output');

      myForm.addEventListener('submit', (event) => {
        event.preventDefault();

        // const search = document.querySelector('#name').value;

        const newForm = new FormData(myForm);
        // const pokeData = Object.fromEntries(newForm);
        const pokeName = newForm.get('search');
        console.log(pokeName);

        fetch(`https://pokeapi.co/api/v2/pokemon/${pokeName}`)
          .then((response) => {
            return response.json();
          })
          .then((pokeData) => {
            console.log(pokeData);
          });
      });
    </script>
  </body>
</html>
